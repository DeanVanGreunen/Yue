{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\Liu\\\\frontend\\\\app\\\\src\\\\pages\\\\login.jsx\";\nimport React, { createRef, forwardRef } from \"react\";\nimport API from \"./../service/api\";\nimport './login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isError: false,\n      errorMessage: \"\"\n    }; // isError -> errorMessage\n\n    this.emailRef = /*#__PURE__*/createRef();\n    this.passwordRef = /*#__PURE__*/createRef(); // bind\n\n    this.handleLogin = this.handleLogin.bind(this);\n  } // handle login\n\n\n  async handleLogin() {\n    let email = this.emailRef.current.value;\n    let password = this.passwordRef.current.value;\n    let result = await API.user.login(email, password);\n    let api_key = result['api_key'];\n\n    if (api_key) {\n      localStorage.setItem('api_key', api_key);\n      window.location.href = \"/dashboard\";\n    } else {\n      this.setState({ ...this.state,\n        isError: true,\n        errorMessage: \"invalid login details\"\n      });\n    }\n  }\n\n  render() {\n    // HTML\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"middle\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"email\",\n              placeholder: \"Email Address\",\n              defaultValue: \"\",\n              ref: this.emailRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              type: \"password\",\n              placeholder: \"Password\",\n              defaultValue: \"\",\n              ref: this.passwordRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 42,\n              columnNumber: 29\n            }, this), this.state.isError ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error\",\n              children: this.state.errorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 45,\n              columnNumber: 37\n            }, this) : '', /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"login\",\n              onClick: this.handleLogin,\n              children: \"LOGIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/register\",\n              children: \"Not a member? Register Here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/forgot\",\n              children: \"Forgot Password?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Projects/Liu/frontend/app/src/pages/login.jsx"],"names":["React","createRef","forwardRef","API","LoginPage","Component","constructor","props","state","isError","errorMessage","emailRef","passwordRef","handleLogin","bind","email","current","value","password","result","user","login","api_key","localStorage","setItem","window","location","href","setState","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AAEA,OAAOC,GAAP,MAAgB,kBAAhB;AAEA,OAAO,aAAP;;AAEA,eAAe,MAAMC,SAAN,SAAwBJ,KAAK,CAACK,SAA9B,CAAwC;AACnDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAACC,MAAAA,OAAO,EAAE,KAAV;AAAiBC,MAAAA,YAAY,EAAE;AAA/B,KAAb,CAFiB,CAEgC;;AAEjD,SAAKC,QAAL,gBAAgBV,SAAS,EAAzB;AACA,SAAKW,WAAL,gBAAmBX,SAAS,EAA5B,CALiB,CAOjB;;AACA,SAAKY,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACD,GAVkD,CAYnD;;;AACiB,QAAXD,WAAW,GAAE;AACf,QAAIE,KAAK,GAAI,KAAKJ,QAAL,CAAcK,OAAd,CAAsBC,KAAnC;AACA,QAAIC,QAAQ,GAAI,KAAKN,WAAL,CAAiBI,OAAjB,CAAyBC,KAAzC;AACA,QAAIE,MAAM,GAAG,MAAMhB,GAAG,CAACiB,IAAJ,CAASC,KAAT,CAAeN,KAAf,EAAsBG,QAAtB,CAAnB;AACA,QAAII,OAAO,GAAGH,MAAM,CAAC,SAAD,CAApB;;AACA,QAAGG,OAAH,EAAW;AACPC,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCF,OAAhC;AACAG,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,YAAvB;AACH,KAHD,MAGO;AACH,WAAKC,QAAL,CAAc,EAAC,GAAG,KAAKpB,KAAT;AAAgBC,QAAAA,OAAO,EAAE,IAAzB;AAA+BC,QAAAA,YAAY,EAAE;AAA7C,OAAd;AACH;AACJ;;AAEDmB,EAAAA,MAAM,GAAG;AACL;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,+BACI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAO,cAAA,EAAE,EAAC,OAAV;AAAkB,cAAA,WAAW,EAAC,eAA9B;AAA8C,cAAA,YAAY,EAAC,EAA3D;AAA8D,cAAA,GAAG,EAAE,KAAKlB;AAAxE;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAO,cAAA,EAAE,EAAC,UAAV;AAAqB,cAAA,IAAI,EAAC,UAA1B;AAAqC,cAAA,WAAW,EAAC,UAAjD;AAA4D,cAAA,YAAY,EAAC,EAAzE;AAA4E,cAAA,GAAG,EAAE,KAAKC;AAAtF;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAKQ,KAAKJ,KAAL,CAAWC,OAAX,gBACI;AAAM,cAAA,SAAS,EAAC,OAAhB;AAAA,wBAAyB,KAAKD,KAAL,CAAWE;AAApC;AAAA;AAAA;AAAA;AAAA,oBADJ,GAEI,EAPZ,eASI;AAAQ,cAAA,EAAE,EAAC,OAAX;AAAmB,cAAA,OAAO,EAAE,KAAKG,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATJ,eAUI;AAAG,cAAA,IAAI,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVJ,eAWI;AAAG,cAAA,IAAI,EAAC,SAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ;AAqBD;;AAjDgD","sourcesContent":["import React, { createRef, forwardRef } from \"react\";\r\n\r\nimport API from \"./../service/api\";\r\n\r\nimport './login.css';\r\n\r\nexport default class LoginPage extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {isError: false, errorMessage: \"\"}; // isError -> errorMessage\r\n\r\n      this.emailRef = createRef();\r\n      this.passwordRef = createRef();\r\n\r\n      // bind\r\n      this.handleLogin = this.handleLogin.bind(this);\r\n    }\r\n\r\n    // handle login\r\n    async handleLogin(){\r\n        let email =  this.emailRef.current.value;\r\n        let password =  this.passwordRef.current.value;\r\n        let result = await API.user.login(email, password);\r\n        let api_key = result['api_key'];\r\n        if(api_key){\r\n            localStorage.setItem('api_key', api_key);\r\n            window.location.href = \"/dashboard\";\r\n        } else {\r\n            this.setState({...this.state, isError: true, errorMessage: \"invalid login details\"});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // HTML\r\n        return (\r\n            <div className=\"outer\">\r\n                <div className=\"middle\">\r\n                    <div className=\"container\">\r\n                        <div className=\"form\">\r\n                            <h4>Login</h4>\r\n                            <input id=\"email\" placeholder=\"Email Address\" defaultValue=\"\" ref={this.emailRef}/>\r\n                            <input id=\"password\" type=\"password\" placeholder=\"Password\" defaultValue=\"\" ref={this.passwordRef}/>\r\n                            {   \r\n                                this.state.isError ? (\r\n                                    <span className=\"error\">{this.state.errorMessage}</span>\r\n                                ) : ''\r\n                            }\r\n                            <button id=\"login\" onClick={this.handleLogin}>LOGIN</button>\r\n                            <a href=\"/register\">Not a member? Register Here</a>\r\n                            <a href=\"/forgot\">Forgot Password?</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n      }\r\n}"]},"metadata":{},"sourceType":"module"}