{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\Liu\\\\frontend\\\\app\\\\src\\\\pages\\\\login.jsx\";\nimport React, { createRef, forwardRef } from \"react\";\nimport API from \"./../services/api\";\nimport { AiFillEye, AiFillEyeInvisible } from \"react-icons/ai\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isError: false,\n      errorMessage: \"\"\n    }; // isError -> errorMessage\n\n    this.emailRef = /*#__PURE__*/createRef();\n    this.passwordRef = /*#__PURE__*/createRef();\n    this.showRef = /*#__PURE__*/createRef();\n    this.hideRef = /*#__PURE__*/createRef(); // bind\n\n    this.handleLogin = this.handleLogin.bind(this);\n    this.togglePassword = this.togglePassword.bind(this);\n  } // handle login\n\n\n  async handleLogin() {\n    let email = this.emailRef.current.value;\n    let password = this.passwordRef.current.value;\n    let result = await API.user.loginUser(email, password);\n    let api_key = result['api_key'];\n\n    if (api_key) {\n      localStorage.setItem('api_key', api_key);\n      window.location.href = \"/dashboard\";\n    } else {\n      this.setState({ ...this.state,\n        isError: true,\n        errorMessage: \"invalid login details\"\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.hideRef.current.style.display = \"block\";\n    this.showRef.current.style.display = \"none\";\n  }\n\n  togglePassword() {\n    let type = this.passwordRef.current.type;\n\n    switch (type) {\n      case \"text\":\n        this.passwordRef.current.type = \"password\";\n        this.showRef.current.style.display = \"none\";\n        this.hideRef.current.style.display = \"block\";\n        break;\n\n      case \"password\":\n        this.passwordRef.current.type = \"text\";\n        this.showRef.current.style.display = \"block\";\n        this.hideRef.current.style.display = \"none\";\n        break;\n    }\n  }\n\n  render() {\n    // HTML\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outer\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"middle\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loginFormLogo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"email\",\n              placeholder: \"Email Address\",\n              defaultValue: \"\",\n              ref: this.emailRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              type: \"password\",\n              placeholder: \"Password\",\n              defaultValue: \"\",\n              ref: this.passwordRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"togglePassword\",\n              onClick: this.togglePassword,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                ref: this.showRef,\n                children: /*#__PURE__*/_jsxDEV(AiFillEye, {\n                  color: \"#4A86E8\",\n                  fontSize: \"22pt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: this.hideRef,\n                children: /*#__PURE__*/_jsxDEV(AiFillEyeInvisible, {\n                  color: \"#4A86E8\",\n                  fontSize: \"22pt\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 57\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this), this.state.isError ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error\",\n              children: this.state.errorMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 37\n            }, this) : '', /*#__PURE__*/_jsxDEV(\"button\", {\n              id: \"login\",\n              onClick: this.handleLogin,\n              children: \"LOGIN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/register\",\n              children: \"Not a member? Register Here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/forgot\",\n              children: \"Forgot Password?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Projects/Liu/frontend/app/src/pages/login.jsx"],"names":["React","createRef","forwardRef","API","AiFillEye","AiFillEyeInvisible","LoginPage","Component","constructor","props","state","isError","errorMessage","emailRef","passwordRef","showRef","hideRef","handleLogin","bind","togglePassword","email","current","value","password","result","user","loginUser","api_key","localStorage","setItem","window","location","href","setState","componentDidMount","style","display","type","render"],"mappings":"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","sourcesContent":["import React, { createRef, forwardRef } from \"react\";\r\n\r\nimport API from \"./../services/api\";\r\n\r\nimport { AiFillEye, AiFillEyeInvisible } from \"react-icons/ai\";\r\n\r\nexport default class LoginPage extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {isError: false, errorMessage: \"\"}; // isError -> errorMessage\r\n\r\n      this.emailRef = createRef();\r\n      this.passwordRef = createRef();\r\n      \r\n      this.showRef = createRef();\r\n      this.hideRef = createRef();\r\n\r\n      // bind\r\n      this.handleLogin = this.handleLogin.bind(this);\r\n      this.togglePassword = this.togglePassword.bind(this);\r\n    }\r\n\r\n    // handle login\r\n    async handleLogin(){\r\n        let email =  this.emailRef.current.value;\r\n        let password =  this.passwordRef.current.value;\r\n        let result = await API.user.loginUser(email, password);\r\n        let api_key = result['api_key'];\r\n        if(api_key){\r\n            localStorage.setItem('api_key', api_key);\r\n            window.location.href = \"/dashboard\";\r\n        } else {\r\n            this.setState({...this.state, isError: true, errorMessage: \"invalid login details\"});\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n      this.hideRef.current.style.display = \"block\";\r\n      this.showRef.current.style.display = \"none\";\r\n    }\r\n\r\n    togglePassword(){\r\n        let type = this.passwordRef.current.type;\r\n        switch(type){\r\n            case \"text\":\r\n                this.passwordRef.current.type = \"password\";\r\n                this.showRef.current.style.display = \"none\";\r\n                this.hideRef.current.style.display = \"block\";                \r\n                break;\r\n            case \"password\":\r\n                this.passwordRef.current.type = \"text\";\r\n                this.showRef.current.style.display = \"block\";\r\n                this.hideRef.current.style.display = \"none\";\r\n            break;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        // HTML\r\n        return (\r\n            <div className=\"outer\">\r\n                <div className=\"middle\">\r\n                    <div className=\"container\">\r\n                        <div className=\"loginFormLogo\"></div>\r\n                        <div className=\"form\">\r\n                            <input id=\"email\" placeholder=\"Email Address\" defaultValue=\"\" ref={this.emailRef}/>\r\n                            <input id=\"password\" type=\"password\" placeholder=\"Password\" defaultValue=\"\" ref={this.passwordRef}/>\r\n                            <button className=\"togglePassword\" onClick={this.togglePassword}>\r\n                                <div ref={this.showRef}><AiFillEye color=\"#4A86E8\" fontSize=\"22pt\"/></div>\r\n                                <div ref={this.hideRef}><AiFillEyeInvisible color=\"#4A86E8\" fontSize=\"22pt\"/></div>\r\n                            </button>\r\n                            {   \r\n                                this.state.isError ? (\r\n                                    <span className=\"error\">{this.state.errorMessage}</span>\r\n                                ) : ''\r\n                            }\r\n                            <button id=\"login\" onClick={this.handleLogin}>LOGIN</button>\r\n                            <a href=\"/register\">Not a member? Register Here</a>\r\n                            <a href=\"/forgot\">Forgot Password?</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n      }\r\n}"]},"metadata":{},"sourceType":"module"}